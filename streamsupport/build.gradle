buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'me.tatarka:gradle-retrolambda:3.2.4'
    }
}

apply plugin: 'java'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

apply plugin: 'me.tatarka.retrolambda'

retrolambda {
    jvmArgs '-noverify'
    jdk System.getenv("JAVA8_HOME")
    oldJdk System.getenv("JAVA7_HOME")
    javaVersion JavaVersion.VERSION_1_7
    //defaultMethods true
    //incremental false
}

sourceSets {
  main {
      java {
          srcDir '../src/main'
//          exclude 'java/java/**'
      }
  }
  test {
      java.srcDir '../src/tests'
  }
}

repositories {
    jcenter()
}

dependencies {
    testCompile 'junit:junit:3.8.2'
    testCompile 'org.testng:testng:6.8.17'
    testCompile project(':streamsupport-atomic')
    testCompile project(':streamsupport-cfuture')
    testCompile project(':streamsupport-flow')
}

tasks.withType(Test) {
  testLogging {
    exceptionFormat "full"
    events "passed", "skipped", "failed", "standardOut", "standardError"
    showStandardStreams = true
  }
}

tasks.withType(JavaCompile) {
    //targetCompatibility = '1.8'
    //sourceCompatibility = '1.8'
    options.encoding = 'Cp1252'
}

apply plugin: 'maven'
